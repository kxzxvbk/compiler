【问题描述】

请根据给定的文法设计并实现错误处理程序，能诊察出常见的语法和语义错误，进行错误局部化处理，并输出错误信息。为了方便自动评测，输入输出及处理要求如下：

（1）输入的被编译源文件统一命名为testfile.txt；错误信息输出到命名为error.txt的结果文件中；

（2）结果文件中包含如下两种信息：错误所在的行号 错误的类别码 （行号与类别码之间只有一个空格，类别码严格按照表格中的小写英文字母）

         其中错误类别码按下表中的定义输出，行号从1开始计数：

错误类型

错误类别码

解释及举例

非法符号或不符合词法

a

例如字符与字符串中出现非法的符号，符号串中无任何符号

名字重定义

b

同一个作用域内出现相同的名字（不区分大小写）

未定义的名字

c

引用未定义的名字

函数参数个数不匹配

d

函数调用时实参个数大于或小于形参个数

函数参数类型不匹配

e

函数调用时形参为整型，实参为字符型；或形参为字符型，实参为整型

条件判断中出现不合法的类型

f

条件判断的左右表达式只能为整型，其中任一表达式为字符型即报错，例如’a’==1

无返回值的函数存在不匹配的return语句

g

无返回值的函数中可以没有return语句，也可以有形如return;的语句，若出现了形如return(表达式);或return();的语句均报此错误

有返回值的函数缺少return语句或存在不匹配的return语句

h

例如有返回值的函数无任何返回语句；或有形如return;的语句；或有形如return();的语句；或return语句中表达式类型与返回值类型不一致

数组元素的下标只能是整型表达式

i

数组元素的下标不能是字符型

不能改变常量的值

j

这里的常量指的是声明为const的标识符。例如 const int a=1;在后续代码中如果出现了修改a值的代码，如给a赋值或用scanf获取a的值，则报错。

应为分号

k

应该出现分号的地方没有分号，例如int x=1缺少分号 （7种语句末尾，for语句中，常量定义末尾，变量定义末尾）

应为右小括号’)’

l

应该出现右小括号的地方没有右小括号，例如fun(a,b;，缺少右小括号（有/无参数函数定义，主函数，带括号的表达式，if，while，for，switch，有/无参数函数调用，读、写、return）

应为右中括号’]’

m

应该出现右中括号的地方没有右中括号，例如int arr[2;缺少右中括号（一维/二维数组变量定义有/无初始化，因子中的一维/二维数组元素，赋值语句中的数组元素）

数组初始化个数不匹配

n

任一维度的元素个数不匹配，或缺少某一维的元素即报错。

例如int a[2][2]={{1,2,3},{1,2}}

<常量>类型不一致

o

变量定义及初始化和switch语句中的<常量>必须与声明的类型一致。int x=’c’;

int y;

switch(y){

case(‘1’) ….

}

缺少缺省语句

p

switch语句中，缺少<缺省>语句。

（3）所有错误都不会出现恶意换行的情况，包括字符、字符串中的换行符、函数调用等等。 

（4）其他类型的错误，错误的行号以能够断定发现出错的一个符号的行号为准。例如有返回值的函数缺少返回语句的错误，只有当识别到函数末尾的}时仍未出现返回语句，才可以断定出错，报错行号即为}的行号。



【文法定义】请到“2020年文法定义(用于查看文法，不计入成绩）”作业中查看文法 

【输入形式】testfile.txt中的存在语法或语义错误的测试程序。

【输出形式】按如上要求将错误处理结果输出至error.txt中。